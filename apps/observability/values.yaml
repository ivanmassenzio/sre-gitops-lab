# Default values for observability stack
kube-prometheus-stack:
  grafana:
    enabled: true
    adminPassword: "admin"
    additionalDataSources:
      - name: Loki
        type: loki
        url: http://observability-loki:3100
        access: proxy
      - name: Tempo
        type: tempo
        url: http://observability-tempo:3100
        access: proxy
  prometheus:
    prometheusSpec:
      serviceMonitorSelectorNilUsesHelmValues: false
      podMonitorSelectorNilUsesHelmValues: false

loki-stack:
  loki:
    commonConfig:
      replication_factor: 1
    persistence:
      enabled: false
  promtail:
    enabled: true
    # Removed manual client config to let helm chart auto-configure connection to Loki

tempo:
  tempo:
    repository: grafana/tempo
    tag: 2.4.0 # Using a specific stable version
    receivers:
      jaeger:
        protocols:
          grpc:
            endpoint: 0.0.0.0:14250
          thrift_http:
            endpoint: 0.0.0.0:14268
      otlp:
        protocols:
          grpc:
            endpoint: 0.0.0.0:4317
          http:
            endpoint: 0.0.0.0:4318
    storage:
      trace:
        backend: local
        local:
          path: /var/tempo/traces
        wal:
          path: /var/tempo/wal

opentelemetry-operator:
  manager:
    collectorImage:
      repository: otel/opentelemetry-collector-contrib
